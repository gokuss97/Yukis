import { homedir } from 'node:os';
import { findImport } from 'find-import';
/**
 * Load the top-most package.json.
 *
 * Useful when called from `node_modules` or a monorepo package
 * and the `root` package.json is not readily available.
 *
 * @param {object} [options] - options
 * @param {string|URL} [options.cwd] - directory to begin search. See `parse-cwd`
 * @returns {object|null} filePath + packageJson pair if found, null if none found
 */
export const rootPackageJson = async (options) => {
    const found = await findImport('package.json', {
        ...options,
        direction: 'down',
        startAt: homedir(),
    });
    if (found) {
        return {
            filePath: found.filePath,
            packageJson: found.content,
        };
    }
    return null;
};
